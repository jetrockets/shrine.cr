crystal_doc_search_index_callback({"repository_name":"github.com/jetrockets/shrine.cr","body":"<p align=\"center\">\n  <p align=\"center\">\n    <a href=\"https://travis-ci.org/jetrockets/shrine.cr\"><img src=\"https://api.travis-ci.org/jetrockets/shrine.cr.svg?branch=master\"></a>\n    <a href=\"https://github.com/jetrockets/shrine.cr/releases\"><img src=\"https://img.shields.io/github/release/jetrockets/shrine.cr.svg?maxAge=360\"></a>\n    <a href=\"https://github.com/jetrockets/shrine.cr/blob/master/LICENSE\"><img src=\"https://img.shields.io/github/license/jetrockets/shrine.cr.svg\"></a>\n  </p>\n</p>\n\n# shrine.cr\n\n[![Join the chat at https://gitter.im/shrine-cr/community](https://badges.gitter.im/shrine-cr/community.svg)](https://gitter.im/shrine-cr/community?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\nShrine is a toolkit for file attachments in Crystal applications. Heavily inspired by [Shrine for Ruby](https://shrinerb.com).\n\n## Documentation\n\n[https://jetrockets.github.io/shrine.cr](https://jetrockets.github.io/shrine.cr)\n\n## Installation\n\n1. Add the dependency to your `shard.yml`:\n\n   ```yaml\n   dependencies:\n     shrine:\n       github: jetrockets/shrine.cr\n   ```\n\n2. Run `shards install`\n\n## Usage\n\n```crystal\nrequire \"shrine\"\n```\n\nShrine.cr is under heavy development!\n\nFirst of all you should configure `Shrine`.\n\n``` crystal\nShrine.configure do |config|\n  config.storages[\"cache\"] = Storage::FileSystem.new(\"uploads\", prefix: \"cache\")\n  config.storages[\"store\"] = Storage::FileSystem.new(\"uploads\")\nend\n```\n\nNow you can use `Shrine` directly to upload your files.\n\n``` crystal\nShrine.upload(file, :store)\n```\n\n`Shrine.upload` method supports additional argument just like Shrine.rb. For example we want our file to have a custom filename.\n\n``` crystal\nShrine.upload(file, :store, metadata: { filename: \"foo.bar\" })\n```\n\n### Custom uploaders\n\nTo implement custom uploader class just inherit it from `Shrine`. You can override `Shrine` methods to implement custom logic. Here is an example how to create a custom file location.\n\n``` crystal\nclass FileImport::AssetUploader < Shrine\n  def generate_location(io : IO | UploadedFile, metadata, context, **options)\n    name = super(io, metadata, **options)\n\n    File.join(\"imports\", context[:model].id.to_s, name)\n  end\nend\n\nFileImport::AssetUploader.upload(file, :store, context: { model: YOUR_ORM_MODEL } })\n```\n\n### S3 storage\n\n#### Creating a Client\n\n``` crystal\nclient = Awscr::S3::Client.new(\"region\", \"key\", \"secret\")\n```\n\nFor S3 compatible services, like DigitalOcean Spaces or Minio, you'll need to set a custom endpoint:\n\n``` crystal\nclient = Awscr::S3::Client.new(\"nyc3\", \"key\", \"secret\", endpoint: \"https://nyc3.digitaloceanspaces.com\")\n```\n\n\n#### Create a S3 storage\n\nThe storage is initialized by providing your bucket and client:\n\n```crystal\nstorage = Shrine::Storage::S3.new(bucket: \"bucket_name\", client: client, prefix: \"prefix\")\n```\n\nSometimes you'll want to add additional upload options to all S3 uploads. You can do that by passing the :upload_options option:\n\n```crystal\nstorage = Shrine::Storage::S3.new(bucket: \"bucket_name\", client: client, upload_options: { \"x-amz-acl\"=> \"public-read\" })\n```\n\nYou can tell S3 storage to make uploads public:\n\n```crystal\nstorage = Shrine::Storage::S3.new(bucket: \"bucket_name\", client: client, public: true)\n```\n\n### ORM usage example\n\nCurrently ORM adapters are not implmented.\n\n#### Granite.\n\n``` crystal\nclass FileImport < Granite::Base\n  connection pg\n  table file_imports\n\n  column id : Int64, primary: true\n  column asset_data : Shrine::UploadedFile, converter: Granite::Converters::Json(Shrine::UploadedFile, JSON::Any)\n\n  after_save do\n    if @asset_changed && @asset_data\n      @asset_data = FileImport::AssetUploader.store(@asset_data.not_nil!, move: true, context: { model: self })\n      @asset_changed = false\n\n      save!\n    end\n  end\n\n  def asset=(upload : Amber::Router::File)\n    @asset_data = FileImport::AssetUploader.cache(upload.file, metadata: { filename: upload.filename })\n    @asset_changed = true\n  end\nend\n\n```\n\n#### Jennifer\n\n``` crystal\nclass FileImport < Jennifer::Model::Base\n  @asset_changed : Bool | Nil\n\n  with_timestamps\n\n  mapping(\n    id: Primary32,\n    asset_data: JSON::Any?,\n    created_at: Time?,\n    updated_at: Time?\n  )\n\n  after_save :move_to_store\n\n  def asset=(upload : Amber::Router::File)\n    self.asset_data = JSON.parse(FileImport::AssetUploader.cache(upload.file, metadata: { filename: upload.filename }).to_json)\n    asset_changed! if asset_data\n  end\n\n  def asset\n    Shrine::UploadedFile.from_json(asset_data.not_nil!.to_json) if asset_data\n  end\n\n  def asset_changed?\n    @asset_changed || false\n  end\n\n  private def asset_changed!\n    @asset_changed = true\n  end\n\n  private def move_to_store\n    if asset_changed?\n      self.asset_data = JSON.parse(FileImport::AssetUploader.store(asset.not_nil!, move: true, context: { model: self }).to_json)\n      @asset_changed = false\n      save!\n    end\n  end\nend\n\n```\n\n## Plugins\n\nShrine.cr has a plugins interface similar to Shrine.rb. You can extend functionality of uploaders inherited from `Shrine` and also extend `UploadedFile` class.\n\n### Determine MIME Type\n\nThe `DetermineMimeType` plugin is used to get mime type of uploaded file in several ways.\n\n``` crystal\nclass Uploader < Shrine\n  load_plugin(\n    Shrine::Plugins::DetermineMimeType,\n    analyzer: Shrine::Plugins::DetermineMimeType::Tools::File\n  )\n\n  finalize_plugins!\nend\n```\n**Analyzers**\n\nThe following analyzers are accepted:\n\n| Name            | Description                                                                                                                                                                                                         |\n|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `File`         | (**Default**). Uses the file utility to determine the MIME type from file contents. It is installed by default on most operating systems.                                                                           |\n| `Mime`         | Uses the [MIME.from_filename](https://crystal-lang.org/api/0.31.1/MIME.html) method to determine the MIME type from file.                                                                                               |\n| `ContentType` | Retrieves the value of the `#content_type` attribute of the IO object. Note that this value normally comes from the \"Content-Type\" request header, so it's not guaranteed to hold the actual MIME type of the file. |\n\n\n### Add Metadata\n\nThe `AddMetadata` plugin provides a convenient method for extracting and adding custom metadata values.\n\n``` crystal\nrequire \"base64\"\n\nclass Uploader < Shrine\n  load_plugin(Shrine::Plugins::AddMetadata)\n\n  add_metadata :signature, -> {\n    Base64.encode(io.gets_to_end)\n  }\n\n  finalize_plugins!\nend\n```\n\nThe above will add `\"signature\"` to the metadata hash.\n\n``` crystal\nimage.metadata[\"signature\"]\n```\n\n**Multiple values**\n\nYou can also extract multiple metadata values at once.\n\n``` crystal\nclass Uploader < Shrine\n  load_plugin(Shrine::Plugins::AddMetadata)\n\n  add_metadata :multiple_values, -> {\n    text = io.gets_to_end\n\n    Shrine::UploadedFile::MetadataType{\n      \"custom_1\" => text,\n      \"custom_2\" => text * 2\n    }\n  }\n\n  finalize_plugins!\nend\n```\n\n``` crystal\nimage.metadata[\"custom_1\"]\nimage.metadata[\"custom_2\"]\n```\n\n\n## Feature Progress\n\nIn no particular order, features that have been implemented and are planned.\nItems not marked as completed may have partial implementations.\n\n- [X] Shrine\n- [X] Shrine::UploadedFile\n    - [ ] ==\n    - [X] #original_filename\n    - [X] #extension\n    - [X] #size\n    - [X] #mime_type\n    - [X] #close\n    - [X] #url\n    - [X] #exists?\n    - [X] #open\n    - [X] #download\n    - [X] #stream\n    - [X] #replace\n    - [X] #delete\n- [ ] Shrine::Attacher\n- [ ] Shrine::Attachment\n- [ ] Shrine::Storage\n    - [X] Shrine::Storage::Memory\n    - [X] Shrine::Storage::FileSystem\n    - [X] Shrine::Storage::S3\n- [ ] Uploaders\n    - [X] Custom uploaders\n    - [ ] Derivatives\n- [ ] ORM adapters\n    - [ ] `Granite` [https://github.com/amberframework/granite](https://github.com/amberframework/granite)\n    - [ ] `crecto` [https://github.com/Crecto/crecto](https://github.com/Crecto/crecto)\n    - [ ] `jennifer.cr` [https://github.com/imdrasil/jennifer.cr](https://github.com/imdrasil/jennifer.cr)\n    - [ ] `Avram` [https://github.com/luckyframework/avram](https://github.com/luckyframework/avram)\n- [X] Plugins\n- [ ] Background processing\n\n\n## Contributing\n\n1. Fork it (<https://github.com/your-github-user/shrine.cr/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Contributors\n\n- [Igor Alexandrov](https://github.com/igor-alexandrov) - creator and maintainer\n- [Arina Shmeleva](https://github.com/arina1004) - helped with S3 Storage\n","program":{"html_id":"github.com/jetrockets/shrine.cr/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/jetrockets/shrine.cr","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine","path":"Shrine.html","kind":"class","full_name":"Shrine","name":"Shrine","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/InstanceMethods","kind":"module","full_name":"Shrine::InstanceMethods","name":"InstanceMethods"},{"html_id":"github.com/jetrockets/shrine.cr/Habitat/SettingsHelpers","kind":"module","full_name":"Habitat::SettingsHelpers","name":"SettingsHelpers"},{"html_id":"github.com/jetrockets/shrine.cr/Habitat/TempConfig","kind":"module","full_name":"Habitat::TempConfig","name":"TempConfig"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/storage/base.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr"},{"filename":"shrine/storage/file_system.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr"},{"filename":"shrine/storage/memory.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr"},{"filename":"shrine/storage/s3.cr","line_number":6,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr"},{"filename":"shrine/plugins/add_metadata.cr","line_number":1,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/add_metadata.cr"},{"filename":"shrine/plugins/column.cr","line_number":1,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr"},{"filename":"shrine/plugins/determine_mime_type.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr"},{"filename":"shrine/attacher.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr"},{"filename":"shrine/uploaded_file.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr"},{"filename":"shrine.cr","line_number":12,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"HABITAT_SETTINGS","name":"HABITAT_SETTINGS","value":"[{decl: storages : Hash(String, Storage::Base) = Hash(String, Storage::Base).new, example: nil}] of Nil","doc":null,"summary":null},{"id":"Log","name":"Log","value":"::Log.for(\"shrine.cr\")","doc":null,"summary":null},{"id":"PLUGINS","name":"PLUGINS","value":"[] of Nil","doc":null,"summary":null}],"included_modules":[{"html_id":"github.com/jetrockets/shrine.cr/Habitat/SettingsHelpers","kind":"module","full_name":"Habitat::SettingsHelpers","name":"SettingsHelpers"},{"html_id":"github.com/jetrockets/shrine.cr/Habitat/TempConfig","kind":"module","full_name":"Habitat::TempConfig","name":"TempConfig"},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/InstanceMethods","kind":"module","full_name":"Shrine::InstanceMethods","name":"InstanceMethods"}],"extended_modules":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/ClassMethods","kind":"module","full_name":"Shrine::ClassMethods","name":"ClassMethods"}],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"configure(&)-class-method","html_id":"configure(&amp;)-class-method","name":"configure","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L32","def":{"name":"configure","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"yield settings"}},{"id":"plugin_settings-class-method","html_id":"plugin_settings-class-method","name":"plugin_settings","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L42","def":{"name":"plugin_settings","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"PluginSettings.new"}},{"id":"settings-class-method","html_id":"settings-class-method","name":"settings","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L32","def":{"name":"settings","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Settings"}}],"constructors":[],"instance_methods":[{"id":"settings-instance-method","html_id":"settings-instance-method","name":"settings","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L32","def":{"name":"settings","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Settings"}}],"macros":[{"id":"finalize_plugins!-macro","html_id":"finalize_plugins!-macro","name":"finalize_plugins!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L121","def":{"name":"finalize_plugins!","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    class PluginsSettings\n      def all\n        \n{% if @type.constant(:PLUGINS) %}\n          {{ (@type.constant(:PLUGINS)).map do |plugin|\n  options = (plugin[:options].empty? ? nil : plugin[:options])\n  {name: (plugin[:decl].stringify.underscore.split(\"::\")).last, options: options}\nend }}\n        {% end %}\n\n      \nend\n\n      def [](key : Symbol | String)\n        all.find\n{ |plugin| plugin[:name] == key.to_s}.try &.[:options]\n      \nend\n\n      \n{% for plugin in @type.constant(:PLUGINS) %}\n        def {{ (plugin[:decl].stringify.underscore.split(\"::\")).last.id }}\n          {% if plugin[:options].empty? %}\n            nil\n          {% else %}\n            {{ plugin[:options] }}\n          {% end %}\n        end\n      {% end %}\n\n    \nend\n\n    def self.plugin_settings\n      PluginsSettings.new\n    \nend\n  \n"}},{"id":"load_plugin(plugin,**args)-macro","html_id":"load_plugin(plugin,**args)-macro","name":"load_plugin","doc":null,"summary":null,"abstract":false,"args":[{"name":"plugin","doc":null,"default_value":"","external_name":"plugin","restriction":""}],"args_string":"(plugin, **args)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L66","def":{"name":"load_plugin","args":[{"name":"plugin","doc":null,"default_value":"","external_name":"plugin","restriction":""}],"double_splat":{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""},"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \n{% plugin = plugin.resolve %}\n\n    \n{% options = args %}\n\n\n    \n{% if PLUGINS.map do |e|\n  e[:decl]\nend.includes?(plugin) %}\n      raise ArgumentError.new(\"Cannot load plugin {{ plugin.stringify }} to {{ @type }}. Plugin has already been initialized\")\n    {% else %}\n      {% if plugin.constant(:DEFAULT_OPTIONS) %}\n        {% if !options %}\n          {% options = plugin.constant(:DEFAULT_OPTIONS) %}\n        {% end %}\n\n        {% for key in (plugin.constant(:DEFAULT_OPTIONS)).keys %}\n          {% if options[key] %}{% else %}\n            {{ options[key] = (plugin.constant(:DEFAULT_OPTIONS))[key] }}\n          {% end %}\n        {% end %}\n      {% end %}\n\n      {% PLUGINS << {decl: plugin, options: options} %}\n    {% end %}\n\n\n    \n{% if plugin.constant(:InstanceMethods) %}\n      include {{ plugin.constant(:InstanceMethods) }}\n    {% end %}\n\n\n    \n{% if plugin.constant(:ClassMethods) %}\n      extend {{ plugin.constant(:ClassMethods) }}\n    {% end %}\n\n\n    \n{% if plugin.constant(:FileClassMethods) %}\n      class UploadedFile < Shrine::UploadedFile\n        extend {{ plugin.constant(:FileClassMethods) }}\n      end\n    {% end %}\n\n\n    \n{% if plugin.constant(:FileMethods) %}\n      class UploadedFile < Shrine::UploadedFile\n        include {{ plugin.constant(:FileMethods) }}\n      end\n    {% end %}\n\n\n    \n{% if plugin.constant(:AttacherClassMethods) %}\n      class Attacher < Shrine::Attacher\n        extend {{ plugin.constant(:AttacherClassMethods) }}\n      end\n    {% end %}\n\n\n    \n{% if plugin.constant(:AttacherMethods) %}\n      class Attacher < Shrine::Attacher\n        include {{ plugin.constant(:AttacherMethods) }}\n      end\n    {% end %}\n\n  \n"}}],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher","path":"Shrine/Attacher.html","kind":"class","full_name":"Shrine::Attacher","name":"Attacher","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher/InstanceMethods","kind":"module","full_name":"Shrine::Attacher::InstanceMethods","name":"InstanceMethods"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/attacher.cr","line_number":6,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher/InstanceMethods","kind":"module","full_name":"Shrine::Attacher::InstanceMethods","name":"InstanceMethods"}],"extended_modules":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher/ClassMethods","kind":"module","full_name":"Shrine::Attacher::ClassMethods","name":"ClassMethods"}],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":"Core class that handles attaching files. It uses Shrine and\nShrine::UploadedFile objects internally.","summary":"<p>Core class that handles attaching files.</p>","class_methods":[{"id":"shrine_class:Shrine.class-class-method","html_id":"shrine_class:Shrine.class-class-method","name":"shrine_class","doc":"Returns the Shrine class that this attacher class is namespaced\nunder.","summary":"<p>Returns the Shrine class that this attacher class is namespaced under.</p>","abstract":false,"args":[],"args_string":" : <span class=\"t\">Shrine</span>.<span class=\"k\">class</span>","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L9","def":{"name":"shrine_class","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine.class","visibility":"Public","body":"@@shrine_class"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher/ClassMethods","path":"Shrine/Attacher/ClassMethods.html","kind":"module","full_name":"Shrine::Attacher::ClassMethods","name":"ClassMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/attacher.cr","line_number":11,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher","kind":"class","full_name":"Shrine::Attacher","name":"Attacher"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"from_data(data:Hash(String,String|UploadedFile::MetadataType)?,**options)-instance-method","html_id":"from_data(data:Hash(String,String|UploadedFile::MetadataType)?,**options)-instance-method","name":"from_data","doc":"Initializes the attacher from a data hash generated from `Attacher#data`.\n\n    attacher = Attacher.from_data({ \"id\" => \"...\", \"storage\" => \"...\", \"metadata\" => { ... } })\n    attacher.file #=> #<Shrine::UploadedFile>","summary":"<p>Initializes the attacher from a data hash generated from <code>Attacher#data</code>.</p>","abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Hash(String, String | UploadedFile::MetadataType) | ::Nil"}],"args_string":"(data : Hash(String, String | UploadedFile::MetadataType)?, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L16","def":{"name":"from_data","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Hash(String, String | UploadedFile::MetadataType) | ::Nil"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"attacher = new(**options)\nattacher.load_data(data)\nattacher\n"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher/InstanceMethods","path":"Shrine/Attacher/InstanceMethods.html","kind":"module","full_name":"Shrine::Attacher::InstanceMethods","name":"InstanceMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/attacher.cr","line_number":23,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher","kind":"class","full_name":"Shrine::Attacher","name":"Attacher"}],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Attacher","kind":"class","full_name":"Shrine::Attacher","name":"Attacher"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(file:Shrine::UploadedFile?=nil,cache_key:String=&quot;cache&quot;,store_key:String=&quot;store&quot;)-class-method","html_id":"new(file:Shrine::UploadedFile?=nil,cache_key:String=&amp;quot;cache&amp;quot;,store_key:String=&amp;quot;store&amp;quot;)-class-method","name":"new","doc":"Initializes the attached file, temporary and permanent storage.","summary":"<p>Initializes the attached file, temporary and permanent storage.</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"nil","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"},{"name":"cache_key","doc":null,"default_value":"\"cache\"","external_name":"cache_key","restriction":"String"},{"name":"store_key","doc":null,"default_value":"\"store\"","external_name":"store_key","restriction":"String"}],"args_string":"(file : Shrine::UploadedFile? = <span class=\"n\">nil</span>, cache_key : String = <span class=\"s\">&quot;cache&quot;</span>, store_key : String = <span class=\"s\">&quot;store&quot;</span>)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L37","def":{"name":"new","args":[{"name":"file","doc":null,"default_value":"nil","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"},{"name":"cache_key","doc":null,"default_value":"\"cache\"","external_name":"cache_key","restriction":"String"},{"name":"store_key","doc":null,"default_value":"\"store\"","external_name":"store_key","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(file, cache_key, store_key)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"assign(value:IO?,**options)-instance-method","html_id":"assign(value:IO?,**options)-instance-method","name":"assign","doc":"Calls #attach_cached, but skips if value is an empty string (this is\nuseful when the uploaded file comes from form fields). Forwards any\nadditional options to #attach_cached.\n\n    attacher.assign(File.open(...))\n    attacher.assign(File.open(...), metadata: { \"foo\" => \"bar\" })\n\n    # ignores the assignment when a blank string is given\n    attacher.assign(\"\")","summary":"<p>Calls #attach_cached, but skips if value is an empty string (this is useful when the uploaded file comes from form fields).</p>","abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"IO | ::Nil"}],"args_string":"(value : IO?, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L53","def":{"name":"assign","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"IO | ::Nil"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"attach_cached(value, **options)"}},{"id":"attach(io:IO|Shrine::UploadedFile|Nil,storage=store_key,**options):UploadedFile?-instance-method","html_id":"attach(io:IO|Shrine::UploadedFile|Nil,storage=store_key,**options):UploadedFile?-instance-method","name":"attach","doc":"Uploads given IO object and changes the uploaded file.\n\n    # uploads the file to permanent storage\n    attacher.attach(io)\n\n    # uploads the file to specified storage\n    attacher.attach(io, storage: :other_store)\n\n    # forwards additional options to the uploader\n    attacher.attach(io, upload_options: { \"x-amz-acl\": \"public-read\" }, metadata: { \"foo\" => \"bar\" })\n\n    # removes the attachment\n    attacher.attach(nil)","summary":"<p>Uploads given IO object and changes the uploaded file.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | Shrine::UploadedFile | Nil"},{"name":"storage","doc":null,"default_value":"store_key","external_name":"storage","restriction":""}],"args_string":"(io : IO | Shrine::UploadedFile | Nil, storage = store_key, **options) : UploadedFile?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L95","def":{"name":"attach","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | Shrine::UploadedFile | Nil"},{"name":"storage","doc":null,"default_value":"store_key","external_name":"storage","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"UploadedFile | Nil","visibility":"Public","body":"if io\n  file = upload(io, storage, **options)\nend\nchange(file)\n"}},{"id":"attach_cached(value:IO|UploadedFile|Nil,**options)-instance-method","html_id":"attach_cached(value:IO|UploadedFile|Nil,**options)-instance-method","name":"attach_cached","doc":"Sets an existing cached file, or uploads an IO object to temporary\nstorage and sets it via #attach. Forwards any additional options to\n#attach.\n\n    # upload file to temporary storage and set the uploaded file.\n    attacher.attach_cached(File.open(...))\n\n    # foward additional options to the uploader\n    attacher.attach_cached(File.open(...), metadata: { \"foo\" => \"bar\" })\n\n    # sets an existing cached file from JSON data\n    attacher.attach_cached(\"{\\\"id\\\":\\\"...\\\",\\\"storage\\\":\\\"cache\\\",\\\"metadata\\ \":{...}}\")\n\n    # sets an existing cached file from Hash data\n    attacher.attach_cached({ \"id\" => \"...\", \"storage\" => \"cache\", \"metadata\" => {} })","summary":"<p>Sets an existing cached file, or uploads an IO object to temporary storage and sets it via #attach.</p>","abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"IO | UploadedFile | Nil"}],"args_string":"(value : IO | UploadedFile | Nil, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L74","def":{"name":"attach_cached","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"IO | UploadedFile | Nil"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"attach(value, **options.merge(storage: cache_key, action: :cache))"}},{"id":"attach_cached(value:String|Hash(String,String|UploadedFile::MetadataType),**options)-instance-method","html_id":"attach_cached(value:String|Hash(String,String|UploadedFile::MetadataType),**options)-instance-method","name":"attach_cached","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String | Hash(String, String | UploadedFile::MetadataType)"}],"args_string":"(value : String | Hash(String, String | UploadedFile::MetadataType), **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L78","def":{"name":"attach_cached","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String | Hash(String, String | UploadedFile::MetadataType)"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"change(cached(value, **options))"}},{"id":"attached?-instance-method","html_id":"attached?-instance-method","name":"attached?","doc":"Returns whether a file is attached.\n\n    attacher.attach(io)\n    attacher.attached? #=> true\n\n    attacher.attach(nil)\n    attacher.attached? #=> false","summary":"<p>Returns whether a file is attached.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L272","def":{"name":"attached?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"!(!file)"}},{"id":"cache_key-instance-method","html_id":"cache_key-instance-method","name":"cache_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L31","def":{"name":"cache_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@cache_key"}},{"id":"cached?(file=self.file)-instance-method","html_id":"cached?(file=self.file)-instance-method","name":"cached?","doc":"Returns whether the file is uploaded to temporary storage.\n\n    attacher.cached?       # checks current file\n    attacher.cached?(file) # checks given file","summary":"<p>Returns whether the file is uploaded to temporary storage.</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"self.file","external_name":"file","restriction":""}],"args_string":"(file = <span class=\"k\">self</span>.file)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L280","def":{"name":"cached?","args":[{"name":"file","doc":null,"default_value":"self.file","external_name":"file","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"uploaded?(file, cache_key)"}},{"id":"change(file:Shrine::UploadedFile?):Shrine::UploadedFile?-instance-method","html_id":"change(file:Shrine::UploadedFile?):Shrine::UploadedFile?-instance-method","name":"change","doc":"Sets the uploaded file with dirty tracking, and runs validations.\n\n    attacher.change(uploaded_file)\n    attacher.file #=> #<Shrine::UploadedFile>\n    attacher.changed? #=> true","summary":"<p>Sets the uploaded file with dirty tracking, and runs validations.</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"}],"args_string":"(file : Shrine::UploadedFile?) : Shrine::UploadedFile?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L216","def":{"name":"change","args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine::UploadedFile | ::Nil","visibility":"Public","body":"if @file == file\nelse\n  @previous = dup\nend\nset(file)\n"}},{"id":"changed?-instance-method","html_id":"changed?-instance-method","name":"changed?","doc":"Returns whether the attachment has changed.\n\n    attacher.changed? #=> false\n    attacher.attach(file)\n    attacher.changed? #=> true\n\nTODO: This will work incorrect if `@previous` is nil","summary":"<p>Returns whether the attachment has changed.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L261","def":{"name":"changed?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"!(!@previous)"}},{"id":"context-instance-method","html_id":"context-instance-method","name":"context","doc":"Returns options that are automatically forwarded to the uploader.\nCan be modified with additional data.","summary":"<p>Returns options that are automatically forwarded to the uploader.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L29","def":{"name":"context","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@context"}},{"id":"data-instance-method","html_id":"data-instance-method","name":"data","doc":"Generates serializable data for the attachment.\n\n    attacher.data #=> { \"id\" => \"...\", \"storage\" => \"...\", \"metadata\": { ... } }","summary":"<p>Generates serializable data for the attachment.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L295","def":{"name":"data","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"file.try(&.data)"}},{"id":"destroy-instance-method","html_id":"destroy-instance-method","name":"destroy","doc":"Destroys the attachment.\n\n    attacher.file.exists? #=> true\n    attacher.destroy\n    attacher.file.exists? #=> false","summary":"<p>Destroys the attachment.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L185","def":{"name":"destroy","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"file.try(&.delete)"}},{"id":"destroy_attached-instance-method","html_id":"destroy_attached-instance-method","name":"destroy_attached","doc":"Destroys the attached file if it exists and is uploaded to permanent\nstorage.\n\n    attacher.file.exists? #=> true\n    attacher.destroy_attached\n    attacher.file.exists? #=> false","summary":"<p>Destroys the attached file if it exists and is uploaded to permanent storage.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L176","def":{"name":"destroy_attached","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if destroy?\n  destroy\nend"}},{"id":"destroy_previous-instance-method","html_id":"destroy_previous-instance-method","name":"destroy_previous","doc":"If a new file was attached, deletes previously attached file if any.\n\n    previous_file = attacher.file\n    attacher.attach(file)\n    attacher.destroy_previous\n    previous_file.exists? #=> false","summary":"<p>If a new file was attached, deletes previously attached file if any.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L166","def":{"name":"destroy_previous","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if changed?\n  @previous.not_nil!.destroy_attached\nend"}},{"id":"file:Shrine::UploadedFile?-instance-method","html_id":"file:Shrine::UploadedFile?-instance-method","name":"file","doc":"Returns the attached uploaded file.","summary":"<p>Returns the attached uploaded file.</p>","abstract":false,"args":[],"args_string":" : Shrine::UploadedFile?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L25","def":{"name":"file","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine::UploadedFile | ::Nil","visibility":"Public","body":"@file"}},{"id":"file!-instance-method","html_id":"file!-instance-method","name":"file!","doc":"Returns attached file or raises an exception if no file is attached.","summary":"<p>Returns attached file or raises an exception if no file is attached.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L190","def":{"name":"file!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"file || (raise(Error.new(\"no file is attached\")))"}},{"id":"file=(file:Shrine::UploadedFile?)-instance-method","html_id":"file=(file:Shrine::UploadedFile?)-instance-method","name":"file=","doc":"Returns the attached uploaded file.","summary":"<p>Returns the attached uploaded file.</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"}],"args_string":"(file : Shrine::UploadedFile?)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L25","def":{"name":"file=","args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@file = file"}},{"id":"finalize-instance-method","html_id":"finalize-instance-method","name":"finalize","doc":"Deletes any previous file and promotes newly attached cached file.\nIt also clears any dirty tracking.\n\n    # promoting cached file\n    attacher.assign(io)\n    attacher.cached? #=> true\n    attacher.finalize\n    attacher.stored?\n\n    # deleting previous file\n    previous_file = attacher.file\n    previous_file.exists? #=> true\n    attacher.assign(io)\n    attacher.finalize\n    previous_file.exists? #=> false\n\n    # clearing dirty tracking\n    attacher.assign(io)\n    attacher.changed? #=> true\n    attacher.finalize\n    attacher.changed? #=> false","summary":"<p>Deletes any previous file and promotes newly attached cached file.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L122","def":{"name":"finalize","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"destroy_previous\npromote_cached\nif changed?\n  @previous = nil\nend\n"}},{"id":"get-instance-method","html_id":"get-instance-method","name":"get","doc":"Returns the attached file.\n\n    # when a file is attached\n    attacher.get #=> #<Shrine::UploadedFile>\n\n    # when no file is attached\n    attacher.get #=> nil","summary":"<p>Returns the attached file.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L238","def":{"name":"get","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"file"}},{"id":"load_data(data:Hash(String,String|UploadedFile::MetadataType))-instance-method","html_id":"load_data(data:Hash(String,String|UploadedFile::MetadataType))-instance-method","name":"load_data","doc":"Loads the uploaded file from data generated by `Attacher#data`.\n\n    attacher.file #=> nil\n    attacher.load_data({ \"id\" => \"...\", \"storage\" => \"...\", \"metadata\" => { ... } })\n    attacher.file #=> #<Shrine::UploadedFile>","summary":"<p>Loads the uploaded file from data generated by <code>Attacher#data</code>.</p>","abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Hash(String, String | UploadedFile::MetadataType)"}],"args_string":"(data : Hash(String, String | UploadedFile::MetadataType))","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L199","def":{"name":"load_data","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Hash(String, String | UploadedFile::MetadataType)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@file = uploaded_file(data)"}},{"id":"load_data(data:Nil)-instance-method","html_id":"load_data(data:Nil)-instance-method","name":"load_data","doc":null,"summary":null,"abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Nil"}],"args_string":"(data : Nil)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L207","def":{"name":"load_data","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@file = nil"}},{"id":"load_data(**data)-instance-method","html_id":"load_data(**data)-instance-method","name":"load_data","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(**data)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L203","def":{"name":"load_data","args":[],"double_splat":{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@file = uploaded_file(data.to_h.transform_keys do |key|\n  key.to_s\nend)"}},{"id":"promote(storage=store_key,**options):Shrine::UploadedFile?-instance-method","html_id":"promote(storage=store_key,**options):Shrine::UploadedFile?-instance-method","name":"promote","doc":"Uploads current file to permanent storage and sets the stored file.\n\n    attacher.cached? #=> true\n    attacher.promote\n    attacher.stored? #=> true","summary":"<p>Uploads current file to permanent storage and sets the stored file.</p>","abstract":false,"args":[{"name":"storage","doc":null,"default_value":"store_key","external_name":"storage","restriction":""}],"args_string":"(storage = store_key, **options) : Shrine::UploadedFile?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L144","def":{"name":"promote","args":[{"name":"storage","doc":null,"default_value":"store_key","external_name":"storage","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine::UploadedFile | Nil","visibility":"Public","body":"if file\n  set(upload(file.not_nil!, storage, **options.merge(action: :store)))\nend"}},{"id":"promote_cached(**options)-instance-method","html_id":"promote_cached(**options)-instance-method","name":"promote_cached","doc":"If a new cached file has been attached, uploads it to permanent storage.\nAny additional options are forwarded to #promote.\n\n    attacher.assign(io)\n    attacher.cached? #=> true\n    attacher.promote_cached\n    attacher.stored? #=> true","summary":"<p>If a new cached file has been attached, uploads it to permanent storage.</p>","abstract":false,"args":[],"args_string":"(**options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L135","def":{"name":"promote_cached","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if promote?\n  promote(**options)\nend"}},{"id":"set(file:Shrine::UploadedFile?):Shrine::UploadedFile?-instance-method","html_id":"set(file:Shrine::UploadedFile?):Shrine::UploadedFile?-instance-method","name":"set","doc":"Sets the uploaded file.\n\n    attacher.set(uploaded_file)\n    attacher.file #=> #<Shrine::UploadedFile>\n    attacher.changed? #=> false","summary":"<p>Sets the uploaded file.</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"}],"args_string":"(file : Shrine::UploadedFile?) : Shrine::UploadedFile?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L227","def":{"name":"set","args":[{"name":"file","doc":null,"default_value":"","external_name":"file","restriction":"Shrine::UploadedFile | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine::UploadedFile | ::Nil","visibility":"Public","body":"@file = file"}},{"id":"shrine_class-instance-method","html_id":"shrine_class-instance-method","name":"shrine_class","doc":"Returns the Shrine class that this attacher's class is namespaced\nunder.","summary":"<p>Returns the Shrine class that this attacher's class is namespaced under.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L312","def":{"name":"shrine_class","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.shrine_class"}},{"id":"store_key-instance-method","html_id":"store_key-instance-method","name":"store_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L32","def":{"name":"store_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@store_key"}},{"id":"stored?(file=self.file)-instance-method","html_id":"stored?(file=self.file)-instance-method","name":"stored?","doc":"Returns whether the file is uploaded to permanent storage.\n\n    attacher.stored?       # checks current file\n    attacher.stored?(file) # checks given file","summary":"<p>Returns whether the file is uploaded to permanent storage.</p>","abstract":false,"args":[{"name":"file","doc":null,"default_value":"self.file","external_name":"file","restriction":""}],"args_string":"(file = <span class=\"k\">self</span>.file)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L288","def":{"name":"stored?","args":[{"name":"file","doc":null,"default_value":"self.file","external_name":"file","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"uploaded?(file, store_key)"}},{"id":"upload(io:IO|Shrine::UploadedFile,storage=store_key,**options):Shrine::UploadedFile-instance-method","html_id":"upload(io:IO|Shrine::UploadedFile,storage=store_key,**options):Shrine::UploadedFile-instance-method","name":"upload","doc":"Delegates to `Shrine.upload`, passing the #context.\n\n    # upload file to specified storage\n    attacher.upload(io, \"store\") #=> #<Shrine::UploadedFile>\n\n    # pass additional options for the uploader\n    attacher.upload(io, \"store\", metadata: { \"foo\" => \"bar\" })","summary":"<p>Delegates to <code>Shrine.upload</code>, passing the #context.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | Shrine::UploadedFile"},{"name":"storage","doc":null,"default_value":"store_key","external_name":"storage","restriction":""}],"args_string":"(io : IO | Shrine::UploadedFile, storage = store_key, **options) : Shrine::UploadedFile","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L155","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | Shrine::UploadedFile"},{"name":"storage","doc":null,"default_value":"store_key","external_name":"storage","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine::UploadedFile","visibility":"Public","body":"shrine_class.upload(io, storage, **options)"}},{"id":"uploaded_file(value)-instance-method","html_id":"uploaded_file(value)-instance-method","name":"uploaded_file","doc":"Converts JSON or Hash data into a Shrine::UploadedFile object.\n\n    attacher.uploaded_file(\"{\\\"id\\\":\\\"...\\\",\\\"storage\\\":\\\"...\\\",\\\"metadata\\\":{...}}\")\n    #=> #<Shrine::UploadedFile ...>\n\n    attacher.uploaded_file({ \"id\" => \"...\", \"storage\" => \"...\", \"metadata\" => {} })\n    #=> #<Shrine::UploadedFile ...>","summary":"<p>Converts JSON or Hash data into a Shrine::UploadedFile object.</p>","abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(value)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L306","def":{"name":"uploaded_file","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"shrine_class.uploaded_file(value)"}},{"id":"url(**options)-instance-method","html_id":"url(**options)-instance-method","name":"url","doc":"If a file is attached, returns the uploaded file URL, otherwise returns\nnil. Any options are forwarded to the storage.\n\n    attacher.file = file\n    attacher.url #=> \"https://...\"\n\n    attacher.file = nil\n    attacher.url #=> nil","summary":"<p>If a file is attached, returns the uploaded file URL, otherwise returns nil.</p>","abstract":false,"args":[],"args_string":"(**options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/attacher.cr#L250","def":{"name":"url","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"file.try(&.url(**options))"}}],"macros":[],"types":[]}]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/ClassMethods","path":"Shrine/ClassMethods.html","kind":"module","full_name":"Shrine::ClassMethods","name":"ClassMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine.cr","line_number":158,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"cache(io,**options)-instance-method","html_id":"cache(io,**options)-instance-method","name":"cache","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L177","def":{"name":"cache","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(new(\"cache\")).upload(io, **options)"}},{"id":"find_storage(name:String)-instance-method","html_id":"find_storage(name:String)-instance-method","name":"find_storage","doc":"Retrieves the storage under the given identifier (Symbol), raising Shrine::Error if the storage is missing.","summary":"<p>Retrieves the storage under the given identifier (Symbol), raising Shrine::Error if the storage is missing.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L164","def":{"name":"find_storage","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"settings.storages[name]? || (raise(Error.new(\"storage #{name.inspect} isn't registered on #{self}\")))"}},{"id":"raise_if_missing_settings!-instance-method","html_id":"raise_if_missing_settings!-instance-method","name":"raise_if_missing_settings!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L185","def":{"name":"raise_if_missing_settings!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Habitat.raise_if_missing_settings!"}},{"id":"store(io,**options)-instance-method","html_id":"store(io,**options)-instance-method","name":"store","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L181","def":{"name":"store","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(new(\"store\")).upload(io, **options)"}},{"id":"upload(io,storage,**options)-instance-method","html_id":"upload(io,storage,**options)-instance-method","name":"upload","doc":"Uploads the file to the specified storage. It delegates to `Shrine#upload`.\n\n```\nShrine.upload(io, :store) # => #<Shrine::UploadedFile>\n```","summary":"<p>Uploads the file to the specified storage.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"storage","doc":null,"default_value":"","external_name":"storage","restriction":""}],"args_string":"(io, storage, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L173","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"storage","doc":null,"default_value":"","external_name":"storage","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(new(storage)).upload(io, **options)"}},{"id":"uploaded_file(hash:Hash(String,String|UploadedFile::MetadataType))-instance-method","html_id":"uploaded_file(hash:Hash(String,String|UploadedFile::MetadataType))-instance-method","name":"uploaded_file","doc":null,"summary":null,"abstract":false,"args":[{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Hash(String, String | UploadedFile::MetadataType)"}],"args_string":"(hash : Hash(String, String | UploadedFile::MetadataType))","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L189","def":{"name":"uploaded_file","args":[{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Hash(String, String | UploadedFile::MetadataType)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.uploaded_file(hash.to_json)"}},{"id":"uploaded_file(json:String)-instance-method","html_id":"uploaded_file(json:String)-instance-method","name":"uploaded_file","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"String"}],"args_string":"(json : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L193","def":{"name":"uploaded_file","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"UploadedFile.from_json(json)"}},{"id":"uploaded_file(object:UploadedFile)-instance-method","html_id":"uploaded_file(object:UploadedFile)-instance-method","name":"uploaded_file","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"UploadedFile"}],"args_string":"(object : UploadedFile)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L197","def":{"name":"uploaded_file","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"UploadedFile"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object"}},{"id":"warn(message)-instance-method","html_id":"warn(message)-instance-method","name":"warn","doc":"Prints a warning to the logger.","summary":"<p>Prints a warning to the logger.</p>","abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L202","def":{"name":"warn","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.warn do\n  \"SHRINE WARNING: #{message}\"\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Error","path":"Shrine/Error.html","kind":"class","full_name":"Shrine::Error","name":"Error","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine.cr","line_number":15,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/FileNotFound","kind":"class","full_name":"Shrine::FileNotFound","name":"FileNotFound"},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/InvalidFile","kind":"class","full_name":"Shrine::InvalidFile","name":"InvalidFile"},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/NotCached","kind":"class","full_name":"Shrine::NotCached","name":"NotCached"}],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/FileNotFound","path":"Shrine/FileNotFound.html","kind":"class","full_name":"Shrine::FileNotFound","name":"FileNotFound","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Error","kind":"class","full_name":"Shrine::Error","name":"Error"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Error","kind":"class","full_name":"Shrine::Error","name":"Error"},{"html_id":"github.com/jetrockets/shrine.cr/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine.cr","line_number":25,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":"Raised by the storage in the #open method.","summary":"<p>Raised by the storage in the #open method.</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/InstanceMethods","path":"Shrine/InstanceMethods.html","kind":"module","full_name":"Shrine::InstanceMethods","name":"InstanceMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine.cr","line_number":207,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"}],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(storage_key:String)-class-method","html_id":"new(storage_key:String)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"storage_key","doc":null,"default_value":"","external_name":"storage_key","restriction":"String"}],"args_string":"(storage_key : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L210","def":{"name":"new","args":[{"name":"storage_key","doc":null,"default_value":"","external_name":"storage_key","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(storage_key)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"generate_location(io:IO|UploadedFile,metadata,**options)-instance-method","html_id":"generate_location(io:IO|UploadedFile,metadata,**options)-instance-method","name":"generate_location","doc":"Generates a unique location for the uploaded file, preserving the\nfile extension. Can be overriden in uploaders for generating custom\nlocation.","summary":"<p>Generates a unique location for the uploaded file, preserving the file extension.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"metadata","doc":null,"default_value":"","external_name":"metadata","restriction":""}],"args_string":"(io : IO | UploadedFile, metadata, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L243","def":{"name":"generate_location","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"metadata","doc":null,"default_value":"","external_name":"metadata","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"basic_location(io, metadata: metadata)"}},{"id":"generate_uid(io)-instance-method","html_id":"generate_uid(io)-instance-method","name":"generate_uid","doc":"Generates a unique identifier that can be used for a location.","summary":"<p>Generates a unique identifier that can be used for a location.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L329","def":{"name":"generate_uid","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Random.new.hex"}},{"id":"storage-instance-method","html_id":"storage-instance-method","name":"storage","doc":"Returns the storage object referenced by the identifier.","summary":"<p>Returns the storage object referenced by the identifier.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L214","def":{"name":"storage","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.find_storage(storage_key)"}},{"id":"storage_key:String-instance-method","html_id":"storage_key:String-instance-method","name":"storage_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L208","def":{"name":"storage_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@storage_key"}},{"id":"upload(io:IO|UploadedFile,**options)-instance-method","html_id":"upload(io:IO|UploadedFile,**options)-instance-method","name":"upload","doc":"The main method for uploading files. Takes an IO-like object and an\noptional context hash (used internally by Shrine::Attacher). It calls\nuser-defined #process, and afterwards it calls #store. The `io` is\nclosed after upload.\n\n  uploader.upload(io)\n  uploader.upload(io, metadata: { \"foo\" => \"bar\" })           # add metadata\n  uploader.upload(io, location: \"path/to/file\")               # specify location\n  uploader.upload(io, upload_options: { acl: \"public-read\" }) # add upload options","summary":"<p>The main method for uploading files.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"}],"args_string":"(io : IO | UploadedFile, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L227","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"metadata = get_metadata(io, **options)\nlocation = get_location(io, **options.merge(metadata: metadata))\n_upload(io, **options.merge(location: location, metadata: metadata))\nUploadedFile.new(id: location, storage_key: storage_key, metadata: metadata)\n"}},{"id":"warn(message)-instance-method","html_id":"warn(message)-instance-method","name":"warn","doc":"Prints a warning to the logger.","summary":"<p>Prints a warning to the logger.</p>","abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L248","def":{"name":"warn","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Log.warn do\n  \"SHRINE WARNING: #{message}\"\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/InvalidFile","path":"Shrine/InvalidFile.html","kind":"class","full_name":"Shrine::InvalidFile","name":"InvalidFile","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Error","kind":"class","full_name":"Shrine::Error","name":"Error"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Error","kind":"class","full_name":"Shrine::Error","name":"Error"},{"html_id":"github.com/jetrockets/shrine.cr/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine.cr","line_number":18,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":"Raised when a file is not a valid IO.","summary":"<p>Raised when a file is not a valid IO.</p>","class_methods":[],"constructors":[{"id":"new(io,missing_methods)-class-method","html_id":"new(io,missing_methods)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"missing_methods","doc":null,"default_value":"","external_name":"missing_methods","restriction":""}],"args_string":"(io, missing_methods)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L19","def":{"name":"new","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"missing_methods","doc":null,"default_value":"","external_name":"missing_methods","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(io, missing_methods)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/NotCached","path":"Shrine/NotCached.html","kind":"class","full_name":"Shrine::NotCached","name":"NotCached","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Error","kind":"class","full_name":"Shrine::Error","name":"Error"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Error","kind":"class","full_name":"Shrine::Error","name":"Error"},{"html_id":"github.com/jetrockets/shrine.cr/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine.cr","line_number":29,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":"Raised by the attacher when assigned uploaded file is not cached.","summary":"<p>Raised by the attacher when assigned uploaded file is not cached.</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins","path":"Shrine/Plugins.html","kind":"module","full_name":"Shrine::Plugins","name":"Plugins","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/add_metadata.cr","line_number":2,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/add_metadata.cr"},{"filename":"shrine/plugins/column.cr","line_number":2,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr"},{"filename":"shrine/plugins/determine_mime_type.cr","line_number":4,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/AddMetadata","path":"Shrine/Plugins/AddMetadata.html","kind":"module","full_name":"Shrine::Plugins::AddMetadata","name":"AddMetadata","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/add_metadata.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/add_metadata.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins","kind":"module","full_name":"Shrine::Plugins","name":"Plugins"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/AddMetadata/InstanceMethods","path":"Shrine/Plugins/AddMetadata/InstanceMethods.html","kind":"module","full_name":"Shrine::Plugins::AddMetadata::InstanceMethods","name":"InstanceMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/add_metadata.cr","line_number":4,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/add_metadata.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"CUSTOM_METATADATA_FIELDS","name":"CUSTOM_METATADATA_FIELDS","value":"{} of Nil => Nil","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/AddMetadata","kind":"module","full_name":"Shrine::Plugins::AddMetadata","name":"AddMetadata"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[{"id":"add_metadata(name,decl)-macro","html_id":"add_metadata(name,decl)-macro","name":"add_metadata","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"decl","doc":null,"default_value":"","external_name":"decl","restriction":""}],"args_string":"(name, decl)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/add_metadata.cr#L33","def":{"name":"add_metadata","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"decl","doc":null,"default_value":"","external_name":"decl","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"          \n{% name = name.id\nCUSTOM_METATADATA_FIELDS[name] = decl\n %}\n\n        \n"}}],"types":[]}]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column","path":"Shrine/Plugins/Column.html","kind":"module","full_name":"Shrine::Plugins::Column","name":"Column","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/column.cr","line_number":3,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"DEFAULT_OPTIONS","name":"DEFAULT_OPTIONS","value":"{column_serializer: Shrine::Plugins::Column::JsonSerializer}","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins","kind":"module","full_name":"Shrine::Plugins","name":"Plugins"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column/AttacherClassMethods","path":"Shrine/Plugins/Column/AttacherClassMethods.html","kind":"module","full_name":"Shrine::Plugins::Column::AttacherClassMethods","name":"AttacherClassMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/column.cr","line_number":31,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column","kind":"module","full_name":"Shrine::Plugins::Column","name":"Column"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"from_column(data,**options):Attacher?-instance-method","html_id":"from_column(data,**options):Attacher?-instance-method","name":"from_column","doc":"Initializes the attacher from a data hash/string expected to come\nfrom a database record column.\n\n    Attacher.from_column('{\"id\":\"...\",\"storage\":\"...\",\"metadata\":{...}}')","summary":"<p>Initializes the attacher from a data hash/string expected to come from a database record column.</p>","abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"args_string":"(data, **options) : Attacher?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L36","def":{"name":"from_column","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"Attacher | Nil","visibility":"Public","body":"attacher = new(**options)\nattacher.load_column(data)\nattacher\n"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column/AttacherMethods","path":"Shrine/Plugins/Column/AttacherMethods.html","kind":"module","full_name":"Shrine::Plugins::Column::AttacherMethods","name":"AttacherMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/column.cr","line_number":43,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column","kind":"module","full_name":"Shrine::Plugins::Column","name":"Column"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(column_serializer=self.class.shrine_class.plugin_settings.column[:column_serializer],**options)-class-method","html_id":"new(column_serializer=self.class.shrine_class.plugin_settings.column[:column_serializer],**options)-class-method","name":"new","doc":"Allows overriding the default column serializer.","summary":"<p>Allows overriding the default column serializer.</p>","abstract":false,"args":[{"name":"column_serializer","doc":null,"default_value":"self.class.shrine_class.plugin_settings.column[:column_serializer]","external_name":"column_serializer","restriction":""}],"args_string":"(column_serializer = <span class=\"k\">self</span>.<span class=\"k\">class</span>.shrine_class.plugin_settings.column[<span class=\"n\">:column_serializer</span>], **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L48","def":{"name":"new","args":[{"name":"column_serializer","doc":null,"default_value":"self.class.shrine_class.plugin_settings.column[:column_serializer]","external_name":"column_serializer","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(column_serializer, **options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"column_data:String?-instance-method","html_id":"column_data:String?-instance-method","name":"column_data","doc":"Returns attacher data as a serialized string (JSON by default).\n\n    attacher.column_data #=> '{\"id\":\"...\",\"storage\":\"...\",\"metadata\":{...}}'","summary":"<p>Returns attacher data as a serialized string (JSON by default).</p>","abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L68","def":{"name":"column_data","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | Nil","visibility":"Public","body":"column_serializer.dump(data)"}},{"id":"column_serializer:Shrine::Plugins::Column::BaseSerializer.class-instance-method","html_id":"column_serializer:Shrine::Plugins::Column::BaseSerializer.class-instance-method","name":"column_serializer","doc":"Column serializer object.","summary":"<p>Column serializer object.</p>","abstract":false,"args":[],"args_string":" : <span class=\"t\">Shrine</span><span class=\"t\">::</span><span class=\"t\">Plugins</span><span class=\"t\">::</span><span class=\"t\">Column</span><span class=\"t\">::</span><span class=\"t\">BaseSerializer</span>.<span class=\"k\">class</span>","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L45","def":{"name":"column_serializer","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine::Plugins::Column::BaseSerializer.class","visibility":"Public","body":"@column_serializer"}},{"id":"load_column(data:String):UploadedFile-instance-method","html_id":"load_column(data:String):UploadedFile-instance-method","name":"load_column","doc":"Loads attachment from column data.\n\n    attacher.file #=> nil\n    attacher.load_column('{\"id\":\"...\",\"storage\":\"...\",\"metadata\":{...}}')\n    attacher.file #=> #<Shrine::UploadedFile>","summary":"<p>Loads attachment from column data.</p>","abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"String"}],"args_string":"(data : String) : UploadedFile","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L57","def":{"name":"load_column","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"UploadedFile","visibility":"Public","body":"load_data(column_serializer.load(data))"}},{"id":"load_column(data:Nil):Nil-instance-method","html_id":"load_column(data:Nil):Nil-instance-method","name":"load_column","doc":null,"summary":null,"abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Nil"}],"args_string":"(data : Nil) : Nil","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L61","def":{"name":"load_column","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":"Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"load_data(data)"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column/BaseSerializer","path":"Shrine/Plugins/Column/BaseSerializer.html","kind":"class","full_name":"Shrine::Plugins::Column::BaseSerializer","name":"BaseSerializer","abstract":true,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/plugins/column.cr","line_number":4,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column/JsonSerializer","kind":"class","full_name":"Shrine::Plugins::Column::JsonSerializer","name":"JsonSerializer"}],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column","kind":"module","full_name":"Shrine::Plugins::Column","name":"Column"},"doc":null,"summary":null,"class_methods":[{"id":"dump(data)-class-method","html_id":"dump(data)-class-method","name":"dump","doc":"Since we cannot make class level method abstract we raise NotImplementedError\nhttps://github.com/crystal-lang/crystal/issues/5956\n","summary":"<p>Since we cannot make class level method abstract we raise NotImplementedError https://github.com/crystal-lang/crystal/issues/5956 </p>","abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"args_string":"(data)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L8","def":{"name":"dump","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"raise(NotImplementedError.new(\"Implement method .dump\"))"}},{"id":"load(data)-class-method","html_id":"load(data)-class-method","name":"load","doc":null,"summary":null,"abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"args_string":"(data)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L12","def":{"name":"load","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"raise(NotImplementedError.new(\"Implement method .load\"))"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column/JsonSerializer","path":"Shrine/Plugins/Column/JsonSerializer.html","kind":"class","full_name":"Shrine::Plugins::Column::JsonSerializer","name":"JsonSerializer","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column/BaseSerializer","kind":"class","full_name":"Shrine::Plugins::Column::BaseSerializer","name":"BaseSerializer"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column/BaseSerializer","kind":"class","full_name":"Shrine::Plugins::Column::BaseSerializer","name":"BaseSerializer"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/plugins/column.cr","line_number":17,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/Column","kind":"module","full_name":"Shrine::Plugins::Column","name":"Column"},"doc":null,"summary":null,"class_methods":[{"id":"dump(data)-class-method","html_id":"dump(data)-class-method","name":"dump","doc":null,"summary":null,"abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"args_string":"(data)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L18","def":{"name":"dump","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"data.try(&.to_json)"}},{"id":"load(data)-class-method","html_id":"load(data)-class-method","name":"load","doc":null,"summary":null,"abstract":false,"args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"args_string":"(data)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/column.cr#L22","def":{"name":"load","args":[{"name":"data","doc":null,"default_value":"","external_name":"data","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Hash(String, String | UploadedFile::MetadataType).from_json(data)"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType","path":"Shrine/Plugins/DetermineMimeType.html","kind":"module","full_name":"Shrine::Plugins::DetermineMimeType","name":"DetermineMimeType","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/determine_mime_type.cr","line_number":5,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"DEFAULT_OPTIONS","name":"DEFAULT_OPTIONS","value":"{analyzer: :file}","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins","kind":"module","full_name":"Shrine::Plugins","name":"Plugins"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType/ClassMethods","path":"Shrine/Plugins/DetermineMimeType/ClassMethods.html","kind":"module","full_name":"Shrine::Plugins::DetermineMimeType::ClassMethods","name":"ClassMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/determine_mime_type.cr","line_number":10,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType","kind":"module","full_name":"Shrine::Plugins::DetermineMimeType","name":"DetermineMimeType"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"determine_mime_type(io)-instance-method","html_id":"determine_mime_type(io)-instance-method","name":"determine_mime_type","doc":"Determines the MIME type of the IO object by calling the specified\nanalyzer.","summary":"<p>Determines the MIME type of the IO object by calling the specified analyzer.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L13","def":{"name":"determine_mime_type","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"config = plugin_settings.determine_mime_type\nanalyzer = mime_type_analyzer(config[:analyzer])\nmime_type = analyzer.call(io)\nio.rewind\nmime_type\n"}},{"id":"mime_type_analyzer(name:Tools)-instance-method","html_id":"mime_type_analyzer(name:Tools)-instance-method","name":"mime_type_analyzer","doc":"Returns callable mime type analyzer object.","summary":"<p>Returns callable mime type analyzer object.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"Tools"}],"args_string":"(name : Tools)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L31","def":{"name":"mime_type_analyzer","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"Tools"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MimeTypeAnalyzer.new(name)"}},{"id":"mime_type_analyzers-instance-method","html_id":"mime_type_analyzers-instance-method","name":"mime_type_analyzers","doc":"Returns a hash of built-in MIME type analyzers, where keys are\nanalyzer names and values are `#call`-able objects which accepts the\nIO object.","summary":"<p>Returns a hash of built-in MIME type analyzers, where keys are analyzer names and values are <code>#call</code>-able objects which accepts the IO object.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L26","def":{"name":"mime_type_analyzers","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"MimeTypeAnalyzer::Tools"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType/InstanceMethods","path":"Shrine/Plugins/DetermineMimeType/InstanceMethods.html","kind":"module","full_name":"Shrine::Plugins::DetermineMimeType::InstanceMethods","name":"InstanceMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/plugins/determine_mime_type.cr","line_number":36,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType","kind":"module","full_name":"Shrine::Plugins::DetermineMimeType","name":"DetermineMimeType"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType/MimeTypeAnalyzer","path":"Shrine/Plugins/DetermineMimeType/MimeTypeAnalyzer.html","kind":"class","full_name":"Shrine::Plugins::DetermineMimeType::MimeTypeAnalyzer","name":"MimeTypeAnalyzer","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/plugins/determine_mime_type.cr","line_number":49,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType","kind":"module","full_name":"Shrine::Plugins::DetermineMimeType","name":"DetermineMimeType"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(tool:Tools)-class-method","html_id":"new(tool:Tools)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"tool","doc":null,"default_value":"","external_name":"tool","restriction":"Tools"}],"args_string":"(tool : Tools)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L50","def":{"name":"new","args":[{"name":"tool","doc":null,"default_value":"","external_name":"tool","restriction":"Tools"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(tool)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"call(io,**options)-instance-method","html_id":"call(io,**options)-instance-method","name":"call","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L53","def":{"name":"call","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"mime_type = case @tool\nwhen Tools::File\n  extract_with_file(io, options)\nwhen Tools::Mime\n  extract_with_mime(io, options)\nwhen Tools::ContentType\n  extract_with_content_type(io, options)\nend\nio.rewind\nmime_type\n"}},{"id":"extract_filename(io)-instance-method","html_id":"extract_filename(io)-instance-method","name":"extract_filename","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L97","def":{"name":"extract_filename","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if io.responds_to?(:original_filename)\n  io.original_filename\nelse\n  if io.responds_to?(:path)\n    File.basename(io.path)\n  end\nend"}},{"id":"extract_with_content_type(io,options)-instance-method","html_id":"extract_with_content_type(io,options)-instance-method","name":"extract_with_content_type","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""}],"args_string":"(io, options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L91","def":{"name":"extract_with_content_type","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (io.responds_to?(:content_type)) && io.content_type\n  (io.content_type.not_nil!.split(\";\")).first\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType/Tools","path":"Shrine/Plugins/DetermineMimeType/Tools.html","kind":"enum","full_name":"Shrine::Plugins::DetermineMimeType::Tools","name":"Tools","abstract":false,"superclass":null,"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Enum","kind":"struct","full_name":"Enum","name":"Enum"},{"html_id":"github.com/jetrockets/shrine.cr/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"github.com/jetrockets/shrine.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/plugins/determine_mime_type.cr","line_number":43,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":true,"alias":false,"aliased":"","const":false,"constants":[{"id":"File","name":"File","value":"0","doc":null,"summary":null},{"id":"Mime","name":"Mime","value":"1","doc":null,"summary":null},{"id":"ContentType","name":"ContentType","value":"2","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Plugins/DetermineMimeType","kind":"module","full_name":"Shrine::Plugins::DetermineMimeType","name":"DetermineMimeType"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"content_type?-instance-method","html_id":"content_type?-instance-method","name":"content_type?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L46","def":{"name":"content_type?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self == ContentType"}},{"id":"file?-instance-method","html_id":"file?-instance-method","name":"file?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L44","def":{"name":"file?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self == File"}},{"id":"mime?-instance-method","html_id":"mime?-instance-method","name":"mime?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/plugins/determine_mime_type.cr#L45","def":{"name":"mime?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self == Mime"}}],"macros":[],"types":[]}]}]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/PluginSettings","path":"Shrine/PluginSettings.html","kind":"struct","full_name":"Shrine::PluginSettings","name":"PluginSettings","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"github.com/jetrockets/shrine.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine.cr","line_number":36,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L36","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"x = allocate\nif x.responds_to?(:finalize)\n  ::GC.add_finalizer(x)\nend\nx\n"}}],"instance_methods":[{"id":"all-instance-method","html_id":"all-instance-method","name":"all","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr#L37","def":{"name":"all","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"[] of Nil"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Settings","path":"Shrine/Settings.html","kind":"class","full_name":"Shrine::Settings","name":"Settings","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine.cr","line_number":32,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[{"id":"storages-class-method","html_id":"storages-class-method","name":"storages","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":null,"def":{"name":"storages","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@storages.not_nil!"}},{"id":"storages=(value:Hash(String,Storage::Base))-class-method","html_id":"storages=(value:Hash(String,Storage::Base))-class-method","name":"storages=","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Hash(String, Storage::Base)"}],"args_string":"(value : Hash(String, Storage::Base))","source_link":null,"def":{"name":"storages=","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Hash(String, Storage::Base)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@storages = value"}},{"id":"storages?-class-method","html_id":"storages?-class-method","name":"storages?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":null,"def":{"name":"storages?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@storages"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage","path":"Shrine/Storage.html","kind":"module","full_name":"Shrine::Storage","name":"Storage","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/storage/base.cr","line_number":4,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr"},{"filename":"shrine/storage/file_system.cr","line_number":4,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr"},{"filename":"shrine/storage/memory.cr","line_number":4,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr"},{"filename":"shrine/storage/s3.cr","line_number":7,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Base","path":"Shrine/Storage/Base.html","kind":"class","full_name":"Shrine::Storage::Base","name":"Base","abstract":true,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/storage/base.cr","line_number":5,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/FileSystem","kind":"class","full_name":"Shrine::Storage::FileSystem","name":"FileSystem"},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Memory","kind":"class","full_name":"Shrine::Storage::Memory","name":"Memory"},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/S3","kind":"class","full_name":"Shrine::Storage::S3","name":"S3"}],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage","kind":"module","full_name":"Shrine::Storage","name":"Storage"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"clean(path:String)-instance-method","html_id":"clean(path:String)-instance-method","name":"clean","doc":"cleans the path in the storage","summary":"<p>cleans the path in the storage</p>","abstract":true,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"args_string":"(path : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr#L24","def":{"name":"clean","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"clean?:Bool-instance-method","html_id":"clean?:Bool-instance-method","name":"clean?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr#L6","def":{"name":"clean?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":"@clean"}},{"id":"delete(id:String)-instance-method","html_id":"delete(id:String)-instance-method","name":"delete","doc":"deletes the file from the storage","summary":"<p>deletes the file from the storage</p>","abstract":true,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr#L21","def":{"name":"delete","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"exists?(id:String):Bool-instance-method","html_id":"exists?(id:String):Bool-instance-method","name":"exists?","doc":"returns whether the file exists on storage","summary":"<p>returns whether the file exists on storage</p>","abstract":true,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : Bool","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr#L18","def":{"name":"exists?","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":""}},{"id":"open(id:String,**options):IO-instance-method","html_id":"open(id:String,**options):IO-instance-method","name":"open","doc":"returns the remote file as an IO-like object","summary":"<p>returns the remote file as an IO-like object</p>","abstract":true,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String, **options) : IO","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr#L12","def":{"name":"open","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"IO","visibility":"Public","body":""}},{"id":"upload(io:IO|UploadedFile,id:String,move=false,**options)-instance-method","html_id":"upload(io:IO|UploadedFile,id:String,move=false,**options)-instance-method","name":"upload","doc":"uploads `io` to the location `id`, can accept upload options","summary":"<p>uploads <code>io</code> to the location <code>id</code>, can accept upload options</p>","abstract":true,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"args_string":"(io : IO | UploadedFile, id : String, move = <span class=\"n\">false</span>, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr#L9","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"url(id:String,**options):String-instance-method","html_id":"url(id:String,**options):String-instance-method","name":"url","doc":"returns URL to the remote file, can accept URL options","summary":"<p>returns URL to the remote file, can accept URL options</p>","abstract":true,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String, **options) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/base.cr#L15","def":{"name":"url","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":""}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/FileSystem","path":"Shrine/Storage/FileSystem.html","kind":"class","full_name":"Shrine::Storage::FileSystem","name":"FileSystem","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Base","kind":"class","full_name":"Shrine::Storage::Base","name":"Base"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Base","kind":"class","full_name":"Shrine::Storage::Base","name":"Base"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/storage/file_system.cr","line_number":5,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"DEFAULT_DIRECTORY_PERMISSIONS","name":"DEFAULT_DIRECTORY_PERMISSIONS","value":"493","doc":null,"summary":null},{"id":"DEFAULT_PERMISSIONS","name":"DEFAULT_PERMISSIONS","value":"420","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage","kind":"module","full_name":"Shrine::Storage","name":"Storage"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(directory:String,prefix:String?=nil,clean=true,permissions:Int=DEFAULT_PERMISSIONS,directory_permissions:Int=DEFAULT_DIRECTORY_PERMISSIONS)-class-method","html_id":"new(directory:String,prefix:String?=nil,clean=true,permissions:Int=DEFAULT_PERMISSIONS,directory_permissions:Int=DEFAULT_DIRECTORY_PERMISSIONS)-class-method","name":"new","doc":"Initializes a storage for uploading to the filesystem.\n\n:prefix\n:  The directory relative to `directory` to which files will be stored,\n   and it is included in the URL.\n\n:permissions\n:  The UNIX permissions applied to created files. Can be set to `nil`,\n   in which case the default permissions will be applied. Defaults to\n   `0644`.\n\n:directory_permissions\n:  The UNIX permissions applied to created directories. Can be set to\n   `nil`, in which case the default permissions will be applied. Defaults\n   to `0755`.\n\n:clean\n:  By default empty folders inside the directory are automatically\n   deleted, but if it happens that it causes too much load on the\n   filesystem, you can set this option to `false`.","summary":"<p>Initializes a storage for uploading to the filesystem.</p>","abstract":false,"args":[{"name":"directory","doc":null,"default_value":"","external_name":"directory","restriction":"String"},{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":"String | ::Nil"},{"name":"clean","doc":null,"default_value":"true","external_name":"clean","restriction":""},{"name":"permissions","doc":null,"default_value":"DEFAULT_PERMISSIONS","external_name":"permissions","restriction":"Int"},{"name":"directory_permissions","doc":null,"default_value":"DEFAULT_DIRECTORY_PERMISSIONS","external_name":"directory_permissions","restriction":"Int"}],"args_string":"(directory : String, prefix : String? = <span class=\"n\">nil</span>, clean = <span class=\"n\">true</span>, permissions : Int = <span class=\"t\">DEFAULT_PERMISSIONS</span>, directory_permissions : Int = <span class=\"t\">DEFAULT_DIRECTORY_PERMISSIONS</span>)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L42","def":{"name":"new","args":[{"name":"directory","doc":null,"default_value":"","external_name":"directory","restriction":"String"},{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":"String | ::Nil"},{"name":"clean","doc":null,"default_value":"true","external_name":"clean","restriction":""},{"name":"permissions","doc":null,"default_value":"DEFAULT_PERMISSIONS","external_name":"permissions","restriction":"Int"},{"name":"directory_permissions","doc":null,"default_value":"DEFAULT_DIRECTORY_PERMISSIONS","external_name":"directory_permissions","restriction":"Int"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(directory, prefix, clean, permissions, directory_permissions)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"delete(id:String)-instance-method","html_id":"delete(id:String)-instance-method","name":"delete","doc":"Deletes the file, and by default deletes the containing directory if\nit's empty.","summary":"<p>Deletes the file, and by default deletes the containing directory if it's empty.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L89","def":{"name":"delete","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = path(id)\nFile.delete(path)\nif clean?\n  clean(path)\nend\n"}},{"id":"directory:String-instance-method","html_id":"directory:String-instance-method","name":"directory","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L6","def":{"name":"directory","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@directory"}},{"id":"directory_permissions:Int32-instance-method","html_id":"directory_permissions:Int32-instance-method","name":"directory_permissions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L9","def":{"name":"directory_permissions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@directory_permissions"}},{"id":"exists?(id:String):Bool-instance-method","html_id":"exists?(id:String):Bool-instance-method","name":"exists?","doc":"Returns true if the file exists on the filesystem.","summary":"<p>Returns true if the file exists on the filesystem.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : Bool","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L67","def":{"name":"exists?","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":"File.exists?(path(id))"}},{"id":"expanded_directory:String-instance-method","html_id":"expanded_directory:String-instance-method","name":"expanded_directory","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L14","def":{"name":"expanded_directory","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"if relative_prefix\n  File.expand_path(File.join(directory, relative_prefix.not_nil!))\nelse\n  File.expand_path(directory)\nend"}},{"id":"open(id:String,**options):File-instance-method","html_id":"open(id:String,**options):File-instance-method","name":"open","doc":"Opens the file on the given location in read mode. Accepts additional\n`File.open` arguments.","summary":"<p>Opens the file on the given location in read mode.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String, **options) : File","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L59","def":{"name":"open","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"File","visibility":"Public","body":"begin\n  File.open(path(id), mode: \"rb\")\nrescue RuntimeError\n  raise(Shrine::FileNotFound.new(\"file #{id.inspect} not found on storage\"))\nend"}},{"id":"path(id:String):String-instance-method","html_id":"path(id:String):String-instance-method","name":"path","doc":"Returns the full path to the file.","summary":"<p>Returns the full path to the file.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L72","def":{"name":"path","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"File.join(expanded_directory, id.gsub(\"/\", File::SEPARATOR))"}},{"id":"permissions:Int32-instance-method","html_id":"permissions:Int32-instance-method","name":"permissions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L8","def":{"name":"permissions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@permissions"}},{"id":"prefix:String?-instance-method","html_id":"prefix:String?-instance-method","name":"prefix","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L7","def":{"name":"prefix","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@prefix"}},{"id":"upload(io:IO|UploadedFile,id:String,move=false,**options)-instance-method","html_id":"upload(io:IO|UploadedFile,id:String,move=false,**options)-instance-method","name":"upload","doc":"Copies the file into the given location.","summary":"<p>Copies the file into the given location.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"args_string":"(io : IO | UploadedFile, id : String, move = <span class=\"n\">false</span>, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L49","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if move && (movable?(io))\n  move(io, path!(id))\nelse\n  File.write(path!(id), content: io, perm: permissions)\nend"}},{"id":"url(id:String,host:String?=nil,**options):String-instance-method","html_id":"url(id:String,host:String?=nil,**options):String-instance-method","name":"url","doc":"If #relative_prefix is not present, returns a path composed of #directory and\nthe given `id`. If #relative_prefix is present, it excludes the #directory part\nfrom the returned path (e.g. #directory can be set to \"public\" folder).\nBoth cases accept a `:host` value which will be prefixed to the\ngenerated path.\ndef url(id, host : String? = nil, **options)","summary":"<p>If #relative_prefix is not present, returns a path composed of #directory and the given <code>id</code>.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"host","doc":null,"default_value":"nil","external_name":"host","restriction":"String | ::Nil"}],"args_string":"(id : String, host : String? = <span class=\"n\">nil</span>, **options) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/file_system.cr#L82","def":{"name":"url","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"host","doc":null,"default_value":"nil","external_name":"host","restriction":"String | ::Nil"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"path = (relative_prefix ? relative_path(id) : path(id)).to_s\nhost ? host + path : path\n"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Memory","path":"Shrine/Storage/Memory.html","kind":"class","full_name":"Shrine::Storage::Memory","name":"Memory","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Base","kind":"class","full_name":"Shrine::Storage::Base","name":"Base"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Base","kind":"class","full_name":"Shrine::Storage::Base","name":"Base"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/storage/memory.cr","line_number":5,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage","kind":"module","full_name":"Shrine::Storage","name":"Storage"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L8","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"clear!-instance-method","html_id":"clear!-instance-method","name":"clear!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L44","def":{"name":"clear!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"store.clear"}},{"id":"delete(id:String)-instance-method","html_id":"delete(id:String)-instance-method","name":"delete","doc":"deletes the file from the storage","summary":"<p>deletes the file from the storage</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L35","def":{"name":"delete","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"store.delete(id)"}},{"id":"delete_prefixed(delete_prefix:String)-instance-method","html_id":"delete_prefixed(delete_prefix:String)-instance-method","name":"delete_prefixed","doc":null,"summary":null,"abstract":false,"args":[{"name":"delete_prefix","doc":null,"default_value":"","external_name":"delete_prefix","restriction":"String"}],"args_string":"(delete_prefix : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L39","def":{"name":"delete_prefixed","args":[{"name":"delete_prefix","doc":null,"default_value":"","external_name":"delete_prefix","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"delete_prefix = (delete_prefix.chomp(\"/\")) + \"/\"\nstore.delete_if do |key, _value|\n  key.start_with?(delete_prefix)\nend\n"}},{"id":"exists?(id:String):Bool-instance-method","html_id":"exists?(id:String):Bool-instance-method","name":"exists?","doc":"returns whether the file exists on storage","summary":"<p>returns whether the file exists on storage</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : Bool","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L23","def":{"name":"exists?","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":"store.has_key?(id)"}},{"id":"open(id:String):IO-instance-method","html_id":"open(id:String):IO-instance-method","name":"open","doc":"returns the remote file as an IO-like object","summary":"<p>returns the remote file as an IO-like object</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : IO","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L16","def":{"name":"open","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"IO","visibility":"Public","body":"begin\n  IO::Memory.new(store[id])\nrescue KeyError\n  raise(Shrine::FileNotFound.new(\"file #{id.inspect} not found on storage\"))\nend"}},{"id":"path(id:String):String-instance-method","html_id":"path(id:String):String-instance-method","name":"path","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L31","def":{"name":"path","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"id"}},{"id":"store:Hash(String,String)-instance-method","html_id":"store:Hash(String,String)-instance-method","name":"store","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L6","def":{"name":"store","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@store"}},{"id":"upload(io:IO|UploadedFile,id:String,**options)-instance-method","html_id":"upload(io:IO|UploadedFile,id:String,**options)-instance-method","name":"upload","doc":"uploads `io` to the location `id`, can accept upload options","summary":"<p>uploads <code>io</code> to the location <code>id</code>, can accept upload options</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(io : IO | UploadedFile, id : String, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L12","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO | UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"store[id.to_s] = io.gets_to_end"}},{"id":"url(id:String,**options):String-instance-method","html_id":"url(id:String,**options):String-instance-method","name":"url","doc":"returns URL to the remote file, can accept URL options","summary":"<p>returns URL to the remote file, can accept URL options</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String, **options) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/memory.cr#L27","def":{"name":"url","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"\"memory://#{path(id)}\""}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/S3","path":"Shrine/Storage/S3.html","kind":"class","full_name":"Shrine::Storage::S3","name":"S3","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Base","kind":"class","full_name":"Shrine::Storage::Base","name":"Base"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage/Base","kind":"class","full_name":"Shrine::Storage::Base","name":"Base"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/storage/s3.cr","line_number":8,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/Storage","kind":"module","full_name":"Shrine::Storage","name":"Storage"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(bucket:String,client:Awscr::S3::Client?,prefix:String?=nil,upload_options:Hash(String,String)=Hash(String,String).new,public:Bool=false)-class-method","html_id":"new(bucket:String,client:Awscr::S3::Client?,prefix:String?=nil,upload_options:Hash(String,String)=Hash(String,String).new,public:Bool=false)-class-method","name":"new","doc":"Initializes a storage for uploading to S3. All options are forwarded to\n[`Shrine::Storage::S3#initialize`], except the following:\n\n:bucket\n: (Required). Name of the S3 bucket.\n\n:client\n: By default an `Awscr::S3::Client` instance is created internally from\n  additional options, but you can use this option to provide your own\n  client.\n\n:prefix\n: \"Directory\" inside the bucket to store files into.\n\n:upload_options\n: Additional options that will be used for uploading files.\n\n:public\n: Sets public access to all uploading files.\n","summary":"<p>Initializes a storage for uploading to S3.</p>","abstract":false,"args":[{"name":"bucket","doc":null,"default_value":"","external_name":"bucket","restriction":"String"},{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":"Awscr::S3::Client | ::Nil"},{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":"String | ::Nil"},{"name":"upload_options","doc":null,"default_value":"Hash(String, String).new","external_name":"upload_options","restriction":"Hash(String, String)"},{"name":"public","doc":null,"default_value":"false","external_name":"public","restriction":"Bool"}],"args_string":"(bucket : String, client : Awscr::S3::Client?, prefix : String? = <span class=\"n\">nil</span>, upload_options : Hash(String, String) = <span class=\"t\">Hash</span>(<span class=\"t\">String</span>, <span class=\"t\">String</span>).<span class=\"k\">new</span>, public : Bool = <span class=\"n\">false</span>)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L34","def":{"name":"new","args":[{"name":"bucket","doc":null,"default_value":"","external_name":"bucket","restriction":"String"},{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":"Awscr::S3::Client | ::Nil"},{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":"String | ::Nil"},{"name":"upload_options","doc":null,"default_value":"Hash(String, String).new","external_name":"upload_options","restriction":"Hash(String, String)"},{"name":"public","doc":null,"default_value":"false","external_name":"public","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(bucket, client, prefix, upload_options, public)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"bucket:String-instance-method","html_id":"bucket:String-instance-method","name":"bucket","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L9","def":{"name":"bucket","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@bucket"}},{"id":"clean(path)-instance-method","html_id":"clean(path)-instance-method","name":"clean","doc":null,"summary":null,"abstract":false,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"args_string":"(path)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L101","def":{"name":"clean","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"client:Awscr::S3::Client-instance-method","html_id":"client:Awscr::S3::Client-instance-method","name":"client","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Awscr::S3::Client","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L10","def":{"name":"client","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Awscr::S3::Client","visibility":"Public","body":"@client"}},{"id":"delete(id:String):Bool-instance-method","html_id":"delete(id:String):Bool-instance-method","name":"delete","doc":"Delets the file, and by default deletes the containing directory if\nit's empty.","summary":"<p>Delets the file, and by default deletes the containing directory if it's empty.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : Bool","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L97","def":{"name":"delete","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":"client.delete_object(bucket, object_key(id))"}},{"id":"exists?(id:String):Bool-instance-method","html_id":"exists?(id:String):Bool-instance-method","name":"exists?","doc":"Returns true if the file exists on the S3.","summary":"<p>Returns true if the file exists on the S3.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : Bool","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L88","def":{"name":"exists?","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":"begin\n  client.head_object(bucket, object: object_key(id))\n  true\nrescue Awscr::S3::Exception\n  false\nend"}},{"id":"object_key(id:String):String-instance-method","html_id":"object_key(id:String):String-instance-method","name":"object_key","doc":"Returns object key with potential prefix.","summary":"<p>Returns object key with potential prefix.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L109","def":{"name":"object_key","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@prefix ? [@prefix, id].join(\"/\") : id"}},{"id":"open(id:String,**options):IO-instance-method","html_id":"open(id:String,**options):IO-instance-method","name":"open","doc":"Returns a IO object from S3","summary":"<p>Returns a IO object from S3</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String, **options) : IO","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L63","def":{"name":"open","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"IO","visibility":"Public","body":"io = IO::Memory.new\nclient.get_object(bucket, object_key(id)) do |obj|\n  io << obj\nend\n"}},{"id":"path(id:String)-instance-method","html_id":"path(id:String)-instance-method","name":"path","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L104","def":{"name":"path","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object_key(id)"}},{"id":"public?:Bool-instance-method","html_id":"public?:Bool-instance-method","name":"public?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L11","def":{"name":"public?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":"@public"}},{"id":"upload(io:IO,id:String,metadata:Shrine::UploadedFile::MetadataType?=nil,move=false,**upload_options)-instance-method","html_id":"upload(io:IO,id:String,metadata:Shrine::UploadedFile::MetadataType?=nil,move=false,**upload_options)-instance-method","name":"upload","doc":"Copies the file into the given location.\n","summary":"<p>Copies the file into the given location.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"metadata","doc":null,"default_value":"nil","external_name":"metadata","restriction":"Shrine::UploadedFile::MetadataType | ::Nil"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"args_string":"(io : IO, id : String, metadata : Shrine::UploadedFile::MetadataType? = <span class=\"n\">nil</span>, move = <span class=\"n\">false</span>, **upload_options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L47","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"metadata","doc":null,"default_value":"nil","external_name":"metadata","restriction":"Shrine::UploadedFile::MetadataType | ::Nil"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"double_splat":{"name":"upload_options","doc":null,"default_value":"","external_name":"upload_options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"options = Hash(String, String).new\nif metadata && metadata[\"filename\"]\n  options[\"Content-Disposition\"] = ContentDisposition.inline(metadata[\"filename\"].to_s)\nend\nif public?\n  options[\"x-amz-acl\"] = \"public-read\"\nend\noptions.merge!(@upload_options)\nupload_options.each do |key, value|\n  options[key.to_s] = value.to_s\nend\nuploader.upload(bucket, object_key(id), io, options)\n"}},{"id":"upload(io:UploadedFile,id:String,move=false,**upload_options)-instance-method","html_id":"upload(io:UploadedFile,id:String,move=false,**upload_options)-instance-method","name":"upload","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"args_string":"(io : UploadedFile, id : String, move = <span class=\"n\">false</span>, **upload_options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L58","def":{"name":"upload","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"UploadedFile"},{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"move","doc":null,"default_value":"false","external_name":"move","restriction":""}],"double_splat":{"name":"upload_options","doc":null,"default_value":"","external_name":"upload_options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"upload(io, id, **upload_options.merge(move: move))"}},{"id":"uploader:Awscr::S3::FileUploader-instance-method","html_id":"uploader:Awscr::S3::FileUploader-instance-method","name":"uploader","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Awscr::S3::FileUploader","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L12","def":{"name":"uploader","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Awscr::S3::FileUploader","visibility":"Public","body":"@uploader"}},{"id":"url(id:String,**options):String-instance-method","html_id":"url(id:String,**options):String-instance-method","name":"url","doc":"Returns the presigned URL to the file.","summary":"<p>Returns the presigned URL to the file.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"args_string":"(id : String, **options) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/storage/s3.cr#L74","def":{"name":"url","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"presigned_options = Awscr::S3::Presigned::Url::Options.new(aws_access_key: client.@aws_access_key, aws_secret_key: client.@aws_secret_key, region: client.@region, object: \"/#{object_key(id)}\", bucket: bucket)\nurl = Awscr::S3::Presigned::Url.new(presigned_options)\nurl.for(:get)\n"}}],"macros":[],"types":[]}]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/UploadedFile","path":"Shrine/UploadedFile.html","kind":"class","full_name":"Shrine::UploadedFile","name":"UploadedFile","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"github.com/jetrockets/shrine.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/uploaded_file.cr","line_number":4,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"github.com/jetrockets/shrine.cr/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine","kind":"class","full_name":"Shrine","name":"Shrine"},"doc":null,"summary":null,"class_methods":[{"id":"from_json(json:String)-class-method","html_id":"from_json(json:String)-class-method","name":"from_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"String"}],"args_string":"(json : String)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L29","def":{"name":"from_json","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new(Mapper.from_json(json))"}}],"constructors":[{"id":"new(id:String,storage_key:String,metadata:MetadataType=MetadataType.new)-class-method","html_id":"new(id:String,storage_key:String,metadata:MetadataType=MetadataType.new)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"storage_key","doc":null,"default_value":"","external_name":"storage_key","restriction":"String"},{"name":"metadata","doc":null,"default_value":"MetadataType.new","external_name":"metadata","restriction":"MetadataType"}],"args_string":"(id : String, storage_key : String, metadata : MetadataType = <span class=\"t\">MetadataType</span>.<span class=\"k\">new</span>)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L36","def":{"name":"new","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"String"},{"name":"storage_key","doc":null,"default_value":"","external_name":"storage_key","restriction":"String"},{"name":"metadata","doc":null,"default_value":"MetadataType.new","external_name":"metadata","restriction":"MetadataType"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(id, storage_key, metadata)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L5","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"id":"new(mapper:Mapper)-class-method","html_id":"new(mapper:Mapper)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"mapper","doc":null,"default_value":"","external_name":"mapper","restriction":"Mapper"}],"args_string":"(mapper : Mapper)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L33","def":{"name":"new","args":[{"name":"mapper","doc":null,"default_value":"","external_name":"mapper","restriction":"Mapper"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(mapper)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"==(other:UploadedFile)-instance-method","html_id":"==(other:UploadedFile)-instance-method","name":"==","doc":"Returns true if the other UploadedFile is uploaded to the same\nstorage and it has the same #id.","summary":"<p>Returns true if the other UploadedFile is uploaded to the same storage and it has the same #id.</p>","abstract":false,"args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":"UploadedFile"}],"args_string":"(other : UploadedFile)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L215","def":{"name":"==","args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":"UploadedFile"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((self.class == other.class) && (self.id == other.id)) && (self.storage_key == other.storage_key)"}},{"id":"[](key)-instance-method","html_id":"[](key)-instance-method","name":"[]","doc":"Shorthand for accessing metadata values.","summary":"<p>Shorthand for accessing metadata values.</p>","abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""}],"args_string":"(key)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L70","def":{"name":"[]","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"metadata[key]?"}},{"id":"close-instance-method","html_id":"close-instance-method","name":"close","doc":"Part of complying to the IO interface. It delegates to the internally\nopened IO object.","summary":"<p>Part of complying to the IO interface.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L163","def":{"name":"close","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if opened?\n  io.close\nend"}},{"id":"content_type-instance-method","html_id":"content_type-instance-method","name":"content_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L61","def":{"name":"content_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"mime_type"}},{"id":"data:Hash(String,String|MetadataType)-instance-method","html_id":"data:Hash(String,String|MetadataType)-instance-method","name":"data","doc":"Returns serializable hash representation of the uploaded file.","summary":"<p>Returns serializable hash representation of the uploaded file.</p>","abstract":false,"args":[],"args_string":" : Hash(String, String | MetadataType)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L209","def":{"name":"data","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, String | MetadataType)","visibility":"Public","body":"{\"id\" => id, \"storage_key\" => storage_key, \"metadata\" => metadata}"}},{"id":"delete-instance-method","html_id":"delete-instance-method","name":"delete","doc":"Calls `#delete` on the storage, which deletes the file from the\nstorage.","summary":"<p>Calls <code><a href=\"../Shrine/UploadedFile.html#delete-instance-method\">#delete</a></code> on the storage, which deletes the file from the storage.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L190","def":{"name":"delete","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"storage.delete(id)"}},{"id":"download(**options)-instance-method","html_id":"download(**options)-instance-method","name":"download","doc":"Streams content into a newly created tempfile and returns it.\n\n```\nuploaded_file.download\n# => #<File:/var/folders/.../20180302-33119-1h1vjbq.jpg>\n```\n","summary":"<p>Streams content into a newly created tempfile and returns it.</p>","abstract":false,"args":[],"args_string":"(**options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L117","def":{"name":"download","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"tempfile = File.tempfile(\"shrine\", \".#{extension}\")\nstream(tempfile, **options)\ntempfile.rewind\n"}},{"id":"download(**options,&)-instance-method","html_id":"download(**options,&amp;)-instance-method","name":"download","doc":"Streams content into a newly created tempfile, yields it to the\nblock, and at the end of the block automatically closes it.\nIn this case the return value of the method is the block\nreturn value.\n\n```\nuploaded_file.download { |tempfile| tempfile.gets_to_end } # tempfile is deleted\n```\n","summary":"<p>Streams content into a newly created tempfile, yields it to the block, and at the end of the block automatically closes it.</p>","abstract":false,"args":[],"args_string":"(**options, &)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L132","def":{"name":"download","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  tempfile = download(**options)\n  yield tempfile\nensure\n  if tempfile\n    tempfile.not_nil!.close\n    tempfile.not_nil!.delete\n  end\nend"}},{"id":"exists?-instance-method","html_id":"exists?-instance-method","name":"exists?","doc":"Calls `#exists?` on the storage, which checks whether the file exists\non the storage.","summary":"<p>Calls <code><a href=\"../Shrine/UploadedFile.html#exists?-instance-method\">#exists?</a></code> on the storage, which checks whether the file exists on the storage.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L179","def":{"name":"exists?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"storage.exists?(id)"}},{"id":"extension-instance-method","html_id":"extension-instance-method","name":"extension","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L43","def":{"name":"extension","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"result = (File.extname(id))[1..-1]?\nif original_filename\n  result || (result = (File.extname(original_filename.not_nil!))[1..-1]?)\nend\nif result\n  result = result.downcase\nend\nresult\n"}},{"id":"gets_to_end(*args,**options)-instance-method","html_id":"gets_to_end(*args,**options)-instance-method","name":"gets_to_end","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L41","def":{"name":"gets_to_end","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"io.gets_to_end(*args, **options)"}},{"id":"gets_to_end(*args,**options,&)-instance-method","html_id":"gets_to_end(*args,**options,&amp;)-instance-method","name":"gets_to_end","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L41","def":{"name":"gets_to_end","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"io.gets_to_end(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"id(*args,**options,&)-instance-method","html_id":"id(*args,**options,&amp;)-instance-method","name":"id","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","source_link":null,"def":{"name":"id","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.id(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"id(*args,**options)-instance-method","html_id":"id(*args,**options)-instance-method","name":"id","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":null,"def":{"name":"id","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.id(*args, **options)"}},{"id":"io:IO-instance-method","html_id":"io:IO-instance-method","name":"io","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : IO","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L204","def":{"name":"io","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"IO","visibility":"Public","body":"(@io || (@io = _open)).not_nil!"}},{"id":"metadata(*args,**options,&)-instance-method","html_id":"metadata(*args,**options,&amp;)-instance-method","name":"metadata","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","source_link":null,"def":{"name":"metadata","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.metadata(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"metadata(*args,**options)-instance-method","html_id":"metadata(*args,**options)-instance-method","name":"metadata","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":null,"def":{"name":"metadata","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.metadata(*args, **options)"}},{"id":"mime_type-instance-method","html_id":"mime_type-instance-method","name":"mime_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L57","def":{"name":"mime_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"metadata[\"mime_type\"]?.try(&.to_s)"}},{"id":"open(**options,&)-instance-method","html_id":"open(**options,&amp;)-instance-method","name":"open","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(**options, &)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L99","def":{"name":"open","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"open(**options)\nbegin\n  yield @io.not_nil!\nensure\n  close\n  @io = nil\nend\n"}},{"id":"open(**options)-instance-method","html_id":"open(**options)-instance-method","name":"open","doc":"Calls `#open` on the storage to open the uploaded file for reading.\nMost storages will return a lazy IO object which dynamically\nretrieves file content from the storage as the object is being read.\n\nIf a block is given, the opened IO object is yielded to the block,\nand at the end of the block it's automatically closed. In this case\nthe return value of the method is the block return value.\n\nIf no block is given, the opened IO object is returned.\n\n```\nuploaded_file.open # => IO object returned by the storage\nuploaded_file.read # => \"...\"\nuploaded_file.close\n\n# or\n\nuploaded_file.open { |io| io.read } # the IO is automatically closed\n```\n","summary":"<p>Calls <code><a href=\"../Shrine/UploadedFile.html#open(**options,&)-instance-method\">#open</a></code> on the storage to open the uploaded file for reading.</p>","abstract":false,"args":[],"args_string":"(**options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L94","def":{"name":"open","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @io\n  @io.not_nil!.close\nend\n@io = _open(**options)\n"}},{"id":"opened?-instance-method","html_id":"opened?-instance-method","name":"opened?","doc":"Returns whether the file has already been opened.","summary":"<p>Returns whether the file has already been opened.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L168","def":{"name":"opened?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"!(!@io)"}},{"id":"original_filename-instance-method","html_id":"original_filename-instance-method","name":"original_filename","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L65","def":{"name":"original_filename","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"metadata[\"filename\"]?.try(&.to_s)"}},{"id":"pos(*args,**options,&)-instance-method","html_id":"pos(*args,**options,&amp;)-instance-method","name":"pos","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L40","def":{"name":"pos","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"io.pos(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"pos(*args,**options)-instance-method","html_id":"pos(*args,**options)-instance-method","name":"pos","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L40","def":{"name":"pos","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"io.pos(*args, **options)"}},{"id":"replace(io,**options)-instance-method","html_id":"replace(io,**options)-instance-method","name":"replace","doc":"Uploads a new file to this file's location and returns it.","summary":"<p>Uploads a new file to this file's location and returns it.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L184","def":{"name":"replace","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"uploader.upload(io, **options, location: id)"}},{"id":"size-instance-method","html_id":"size-instance-method","name":"size","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L51","def":{"name":"size","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  metadata[\"size\"]?.try(&.to_i)\nrescue ArgumentError\n  nil\nend"}},{"id":"storage:Shrine::Storage::Base-instance-method","html_id":"storage:Shrine::Storage::Base-instance-method","name":"storage","doc":"Returns the storage that this file was uploaded to.","summary":"<p>Returns the storage that this file was uploaded to.</p>","abstract":false,"args":[],"args_string":" : Shrine::Storage::Base","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L200","def":{"name":"storage","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Shrine::Storage::Base","visibility":"Public","body":"(Shrine.find_storage(storage_key.not_nil!)).not_nil!"}},{"id":"storage_key(*args,**options,&)-instance-method","html_id":"storage_key(*args,**options,&amp;)-instance-method","name":"storage_key","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","source_link":null,"def":{"name":"storage_key","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.storage_key(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"storage_key(*args,**options)-instance-method","html_id":"storage_key(*args,**options)-instance-method","name":"storage_key","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":null,"def":{"name":"storage_key","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.storage_key(*args, **options)"}},{"id":"stream(destination:IO,**options)-instance-method","html_id":"stream(destination:IO,**options)-instance-method","name":"stream","doc":"Streams uploaded file content into the specified destination. The\ndestination object is given directly to `IO.copy`.\n\nIf the uploaded file is already opened, it will be simply rewinded\nafter streaming finishes. Otherwise the uploaded file is opened and\nthen closed after streaming.\n\n```\nuploaded_file.stream(IO::Memory.new)\n```","summary":"<p>Streams uploaded file content into the specified destination.</p>","abstract":false,"args":[{"name":"destination","doc":null,"default_value":"","external_name":"destination","restriction":"IO"}],"args_string":"(destination : IO, **options)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L152","def":{"name":"stream","args":[{"name":"destination","doc":null,"default_value":"","external_name":"destination","restriction":"IO"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if opened?\n  IO.copy(io, destination)\n  io.rewind\nelse\n  open(**options) do |io|\n    IO.copy(io, destination)\n  end\nend"}},{"id":"to_json(*args,**options,&)-instance-method","html_id":"to_json(*args,**options,&amp;)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","source_link":null,"def":{"name":"to_json","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.to_json(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"to_json(*args,**options)-instance-method","html_id":"to_json(*args,**options)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":null,"def":{"name":"to_json","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@mapper.to_json(*args, **options)"}},{"id":"uploader-instance-method","html_id":"uploader-instance-method","name":"uploader","doc":"Returns an uploader object for the corresponding storage.","summary":"<p>Returns an uploader object for the corresponding storage.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L195","def":{"name":"uploader","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Shrine.new(storage_key)"}},{"id":"url(**options):String-instance-method","html_id":"url(**options):String-instance-method","name":"url","doc":"Calls `#url` on the storage, forwarding any given URL options.","summary":"<p>Calls <code><a href=\"../Shrine/UploadedFile.html#url(**options):String-instance-method\">#url</a></code> on the storage, forwarding any given URL options.</p>","abstract":false,"args":[],"args_string":"(**options) : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L173","def":{"name":"url","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"storage.url(id, **options)"}}],"macros":[],"types":[{"html_id":"github.com/jetrockets/shrine.cr/Shrine/UploadedFile/Mapper","path":"Shrine/UploadedFile/Mapper.html","kind":"struct","full_name":"Shrine::UploadedFile::Mapper","name":"Mapper","abstract":false,"superclass":{"html_id":"github.com/jetrockets/shrine.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"github.com/jetrockets/shrine.cr/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"github.com/jetrockets/shrine.cr/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"github.com/jetrockets/shrine.cr/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"github.com/jetrockets/shrine.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"shrine/uploaded_file.cr","line_number":9,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"github.com/jetrockets/shrine.cr/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/UploadedFile","kind":"class","full_name":"Shrine::UploadedFile","name":"UploadedFile"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(id,storage_key,metadata)-class-method","html_id":"new(id,storage_key,metadata)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"storage_key","doc":null,"default_value":"","external_name":"storage_key","restriction":""},{"name":"metadata","doc":null,"default_value":"","external_name":"metadata","restriction":""}],"args_string":"(id, storage_key, metadata)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L16","def":{"name":"new","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"storage_key","doc":null,"default_value":"","external_name":"storage_key","restriction":""},{"name":"metadata","doc":null,"default_value":"","external_name":"metadata","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(id, storage_key, metadata)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L10","def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"id:String-instance-method","html_id":"id:String-instance-method","name":"id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L12","def":{"name":"id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@id"}},{"id":"metadata:MetadataType-instance-method","html_id":"metadata:MetadataType-instance-method","name":"metadata","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : MetadataType","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L14","def":{"name":"metadata","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"MetadataType","visibility":"Public","body":"@metadata"}},{"id":"storage_key:String-instance-method","html_id":"storage_key:String-instance-method","name":"storage_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr#L13","def":{"name":"storage_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@storage_key"}}],"macros":[],"types":[]},{"html_id":"github.com/jetrockets/shrine.cr/Shrine/UploadedFile/MetadataType","path":"Shrine/UploadedFile/MetadataType.html","kind":"alias","full_name":"Shrine::UploadedFile::MetadataType","name":"MetadataType","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"shrine/uploaded_file.cr","line_number":7,"url":"https://github.com/jetrockets/shrine.cr/blob/8a0ac0deeb379f03e3513769b0e7cb3b597a6792/src/shrine/uploaded_file.cr"}],"repository_name":"github.com/jetrockets/shrine.cr","program":false,"enum":false,"alias":true,"aliased":"Hash(String, Int32 | Int64 | String | UInt32 | UInt64 | Nil)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/jetrockets/shrine.cr/Shrine/UploadedFile","kind":"class","full_name":"Shrine::UploadedFile","name":"UploadedFile"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}]}]}})